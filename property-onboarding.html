<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Property Onboarding - Truva</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Roboto', sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background: #0052cc;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 1.8em;
      font-weight: 500;
    }
    .container {
      max-width: 700px;
      margin: 40px auto;
      background: #fff;
      padding: 30px 40px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .progress {
      text-align: center;
      margin-bottom: 30px;
      font-weight: 500;
      color: #0052cc;
    }
    .progress span {
      margin: 0 8px;
    }
    form {
      margin-bottom: 30px;
    }
    form label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #555;
    }
    form input[type="text"],
    form input[type="number"],
    form textarea {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
    }
    form textarea {
      resize: vertical;
      min-height: 80px;
    }
    form input[type="submit"],
    form button {
      width: 100%;
      padding: 12px;
      background: #0052cc;
      border: none;
      border-radius: 4px;
      color: #fff;
      font-size: 1.1em;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    form input[type="submit"]:hover,
    form button:hover {
      background: #003d99;
    }
    /* Three-column layout for document statuses */
    #docColumns {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    #docColumns > div {
      flex: 1;
      margin-right: 10px;
    }
    #docColumns > div:last-child {
      margin-right: 0;
    }
    #docColumns h4 {
      text-align: center;
      margin-bottom: 10px;
      color: #0052cc;
    }
    #docColumns ul {
      list-style: none;
      padding: 0;
    }
    #docColumns li {
      background: #f0f4f8;
      margin-bottom: 8px;
      padding: 8px;
      border-radius: 4px;
      text-align: center;
    }
    /* Responsive adjustments */
    @media (max-width: 700px) {
      .container {
        margin: 20px;
        padding: 20px;
      }
      #docColumns {
        flex-direction: column;
      }
      #docColumns > div {
        margin-bottom: 20px;
      }
      #docColumns > div:last-child {
        margin-bottom: 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Truva Seller Demo</h1>
  </header>
  <div class="container">
    <div class="progress">
      <span style="color: green;">Seller Onboarding</span> → <span style="color: blue;">Property Onboarding</span> → Staging → Buyer Interactions → Sale Process
    </div>
    
    <!-- Property Details Section -->
    <h2>Property Details</h2>
    <form id="propertyDetailsForm">
      <label for="propertyAddress">Property Address:</label>
      <textarea id="propertyAddress" name="propertyAddress" placeholder="Enter the property address" required></textarea>
      
      <label for="propertyType">Property Type (Apartment, Villa, etc.):</label>
      <input type="text" id="propertyType" name="propertyType" placeholder="Enter property type" required>
      
      <label for="area">Area (in sq.ft):</label>
      <input type="number" id="area" name="area" placeholder="Enter area in square feet" required>
      
      <input type="submit" value="Save Property Details">
    </form>
    
    <!-- Required Documents Upload Section -->
    <h2>Upload Required Property Documents</h2>
    <!-- Three-column layout: Pending, Query, Approved -->
    <div id="docColumns">
      <div>
        <h4>Pending ⏳</h4>
        <ul id="pendingDocs">
          <!-- Pending property documents will be listed here -->
        </ul>
      </div>
      <div>
        <h4>Query ❓</h4>
        <ul id="queryDocs">
          <!-- Documents with queries will be listed here -->
        </ul>
      </div>
      <div>
        <h4>Approved ✅</h4>
        <ul id="approvedDocs">
          <!-- Approved documents will be listed here -->
        </ul>
      </div>
    </div>
    
    <!-- Upload Document Form -->
    <form id="uploadDocForm">
      <label for="requiredDocSelect">Select Document Type:</label>
      <select id="requiredDocSelect" required>
        <!-- Options will be populated dynamically -->
      </select>
      
      <label for="docUrl">Document URL:</label>
      <input type="text" id="docUrl" placeholder="Enter URL to the document" required>
      
      <input type="submit" value="Upload Document">
    </form>
    
    <!-- Button to Proceed to Next Stage -->
    <button id="nextStageBtn">Next: Go to Staging</button>
  </div>
  
  <script>
    // Check if property details are saved
    let propertyDetailsSaved = false;
    // Pre-defined list of required property documents with initial status 'pending'
    let requiredDocs = [
      { type: "Title Deed", status: "pending" },
      { type: "Encumbrance Certificate", status: "pending" },
      { type: "Mutation Certificate", status: "pending" },
      { type: "Approved Building Plan", status: "pending" },
      { type: "Tax Receipts", status: "pending" },
      { type: "Utility Bills", status: "pending" }
    ];
    // List of uploaded documents for display
    let uploadedDocuments = [];
    
    // DOM Elements
    const propertyDetailsForm = document.getElementById('propertyDetailsForm');
    const pendingDocsList = document.getElementById('pendingDocs');
    const queryDocsList = document.getElementById('queryDocs');
    const approvedDocsList = document.getElementById('approvedDocs');
    const requiredDocSelect = document.getElementById('requiredDocSelect');
    const uploadDocForm = document.getElementById('uploadDocForm');
    const docUrlInput = document.getElementById('docUrl');
    const nextStageBtn = document.getElementById('nextStageBtn');
    
    // Icons mapping
    const icons = {
      pending: "⏳",
      query: "❓",
      approved: "✅"
    };
    
    // Populate required document dropdown
    function updateRequiredDocSelect() {
      requiredDocSelect.innerHTML = '';
      requiredDocs.forEach((doc, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = doc.type;
        requiredDocSelect.appendChild(option);
      });
    }
    
    // Update document columns based on current statuses
    function updateDocColumns() {
      pendingDocsList.innerHTML = '';
      queryDocsList.innerHTML = '';
      approvedDocsList.innerHTML = '';
      
      requiredDocs.forEach(doc => {
        const li = document.createElement('li');
        li.textContent = doc.type + " " + icons[doc.status];
        if (doc.status === "pending") {
          pendingDocsList.appendChild(li);
        } else if (doc.status === "query") {
          queryDocsList.appendChild(li);
        } else if (doc.status === "approved") {
          approvedDocsList.appendChild(li);
        }
      });
    }
    
    // Handle property details form submission
    propertyDetailsForm.addEventListener('submit', function(e) {
      e.preventDefault();
      // In a real app, you'd save these details to a database.
      propertyDetailsSaved = true;
      alert("Property details saved.");
    });
    
    // Handle upload document form submission
    uploadDocForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const selectedIndex = requiredDocSelect.value;
      const docUrl = docUrlInput.value;
      // For demo, we simulate the document upload by marking it as "approved"
      requiredDocs[selectedIndex].status = "approved";
      // Optionally, record the document in an uploadedDocuments array
      uploadedDocuments.push({
        type: requiredDocs[selectedIndex].type,
        url: docUrl,
        status: "approved"
      });
      docUrlInput.value = '';
      updateDocColumns();
    });
    
    // Ensure that user cannot proceed unless property details are saved
    nextStageBtn.addEventListener('click', function() {
      if (!propertyDetailsSaved) {
        alert("Please save property details before proceeding.");
      } else {
        // Mark property onboarding as complete and proceed to next stage
        localStorage.setItem('propertyOnboardingComplete', 'true');
        window.location.href = 'staging.html';
      }
    });
    
    // Initial setup
    updateRequiredDocSelect();
    updateDocColumns();
  </script>
</body>
</html>
